Generating random numbers, and sampling from random distributions.

## 1. Announcement to mailing list

  - Proposed editor: Huon Wilson ([@huonw](https://github.com/huonw))
  - Date proposed: _date of proposal_
  - Link: _link to email_

###  Notes from discussion on mailing list

  - [first discussion](https://mail.mozilla.org/pipermail/rust-dev/2013-April/003843.html)

## 2. Research of standards and techniques

  1. Standard: _standard_
    - _link to docs_
    - ...
  2. Standard: _standard_
    - _link to docs_
    - ...
  1. Technique: Generating random bits/numbers (i.e `u32` or `u64`)
    - http://en.wikipedia.org/wiki/List_of_random_number_generators
    - http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator
    - [ISAAC/ISAAC-64 RNG](http://en.wikipedia.org/wiki/ISAAC_%28cipher%29)
       - cryptographically secure
       - http://burtleburtle.net/bob/rand/isaacafa.html
       - ISAAC is the main RNG used in rust at the moment
       - I've found little/no information about ISAAC-64
       - ["On the pseudo-random generator ISAAC" Aumasson 2006](http://eprint.iacr.org/2006/438.pdf) (details some problems in ISAAC and proposes a slight improvement ISAAC+)
    - [Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)
       - "The Mersenne twister is the default random number generator for Python,[7][8] Ruby,[9] R,[10] PHP,[11] MATLAB and also available in C++[12] since C++11."
       - "The algorithm in its native form is not suitable for cryptography"
       - [SIMD-oriented Fast Mersenne Twister (SFMT)](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/)
          - dSFMT is used by Julia, and possibly Erlang
    - [Xorshift](http://en.wikipedia.org/wiki/Xorshift)
       - Not crypto quality, but simple, small and fast
       - Currently the only other RNG in Rust
       - ["On the Xorshift Random Number Generators" Panneton & L'Ecuyer 2005(?)](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.63.7497&rep=rep1&type=pdf) (analysis of and improvements to the xorshift generators)
    - [LFSR](http://en.wikipedia.org/wiki/Linear_feedback_shift_registers), aka Tausworthe generators
       - Not crypto quality, fast
       - ["Tables of maximally equidistributed combined LSFR generators" L'Ecuyer 1999](http://www.ams.org/mcom/1999-68-225/S0025-5718-99-01039-X/S0025-5718-99-01039-X.pdf) (includes a 64 bit variant)
       - ["Maximally Equidistributed Combined Tausworthe Generators" L'Ecuyer 1996](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.43.4155)
       - ["Random Numbers Generated by Linear Recurrence Modulo Two" Tausworthe 1965](http://www.ams.org/journals/mcom/1965-19-090/S0025-5718-1965-0184406-1/S0025-5718-1965-0184406-1.pdf)
    - [WELL](http://en.wikipedia.org/wiki/Well_Equidistributed_Long-period_Linear)
       - Better randomness properties than Mersenne twister
       - Fairly fast public domain implementation on p8 of http://www.lomont.org/Math/Papers/2008/Lomont_PRNG_2008.pdf (this is an overview of multiple RNG algorithms)
    - [MWC/CMWC](http://en.wikipedia.org/wiki/Multiply-with-carry)
       - Not crypto quality, fast
       - ["Random Number Generators" Marsaglia 2003](http://www.jmasm.com/journal/2003_vol2_no1.pdf) (pages 6-17, also relevant to xorshift)
    - Wichmann Hill
       - ["Generating good pseudo-random numbers" Wichmann-Hill 2005](http://dl.acm.org/citation.cfm?id=1219278)
    - Hardware
       - `RDRAND` on Ivy Bridge x64 CPUs ([example of use in a Haskell package](https://github.com/TomMD/entropy/blob/master/cbits/rdrand.c))
    - Assorted names: YARN5, Lagged Fibonacci, Multiple recurrence

  2. Technique: Testing quality of random numbers 
    - Very important! Extremely hard to tell if random numbers are "random enough" (a bug in an implementation, or a bad algorithm, can produce numbers that look random but aren't random enough for many purposes).
    - [Overview wikipedia article](http://en.wikipedia.org/wiki/Randomness_test)
    - [Diehard tests](http://en.wikipedia.org/wiki/Diehard_tests) (e.g. [dieharder](http://www.phy.duke.edu/~rgb/General/dieharder.php))
    - [TestU01](http://en.wikipedia.org/wiki/TestU01) including "Small crush", "Crush" and "Big crush"
    - [tests written by the creator of ISAAC](http://burtleburtle.net/bob/rand/testsfor.html)
    - [ENT](http://www.fourmilab.ch/random/)
    - [NIST](http://csrc.nist.gov/groups/ST/toolkit/rng/index.html)
    - Add a new make target "check-rngs" with a testsuite? 
  3. Technique: sampling from distributions
    - Converting ints to floats:
       - Most languages/implementations just multiply the random int by `2**-num_bits` to get a float in `[0,1)`. 
       - ["Conversion of High-Period Random Numbers to Floating Point" Doornik 2006](http://www.doornik.com/research/randomdouble.pdf)
    - General:
      - [Inverse transform sampling](http://en.wikipedia.org/wiki/Inverse_transform_sampling)
      - [Ziggurat algorithm](http://en.wikipedia.org/wiki/Ziggurat_algorithm) (any distribution with decreasing density functions)
      - ["The Monty Python method for generating random variables" Marsaglia & Tsang 1998](http://dl.acm.org/citation.cfm?id=292395.292453) (similar to Ziggurat, except slightly slower and doesn't require tables.)
    - Normal
      - [Box-Muller transform](https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform) and [Marsaglia polar method](https://en.wikipedia.org/wiki/Marsaglia_polar_method) (normal distribution, both are almost certainly inferior to the ziggurat algorithm)
      - ["Gaussian Random Number Generators" Thomas, Luk, Leong, Villasenor 2007](http://www.cse.cuhk.edu.hk/~phwl/mt/public/archives/papers/grng_acmcs07.pdf) (extremely comprehensive overview of many algorithms for normal RVs, including performance and statistical comparisons. Their conclusion is Ziggurat is fast and statistically good.)
    - Gamma
      - ["A simple method for generating gamma variables" Marsaglia & Tsang 2000](http://dl.acm.org/citation.cfm?id=358414)
      - ["A Simple Gamma Random Number Generator for Arbitrary Shape Parameters" Tanizaki 2008](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.158.3866)
      - https://hips.seas.harvard.edu/blog/2013/02/21/a-parallel-gamma-sampling-implementation/



### Summary of research on standards and leading techniques
#### Relevant standards and techniques exist?
#### Those intended to follow (and why)
#### Those intended to ignore (and why)

## 3. Research of libraries from other languages

  1. Language: C++11
    - http://www.cplusplus.com/reference/random/
  2. Language: Python
    - http://docs.python.org/3.3/library/random.html
  3. Language: R (statistical language, so much broader random number support than necessary)
    - http://stat.ethz.ch/R-manual/R-patched/library/base/html/Random.html
    - http://stat.ethz.ch/R-manual/R-patched/library/stats/html/Distributions.html
    - Parallel random numbers (section 6): http://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf
  4. Language: Julia (also a statistical language)
    - https://github.com/JuliaStats/Distributions.jl
  4. Language: D
    - http://dlang.org/phobos/std_random.html (no support for sampling from distributions other than uniform, but many RNGs)
  5. Language: Go
    - http://golang.org/pkg/math/rand/
  6. Language: Erlang
    - https://mail.mozilla.org/pipermail/rust-dev/2013-April/003881.html
  4. Library: [GSL](https://www.gnu.org/software/gsl/manual/html_node/)
    - https://www.gnu.org/software/gsl/manual/html_node/Random-Number-Generation.html
    - https://www.gnu.org/software/gsl/manual/html_node/Random-Number-Distributions.html
  5. Library: Numpy/Scipy
    - http://docs.scipy.org/doc/numpy/reference/routines.random.html
    - http://docs.scipy.org/doc/scipy/reference/stats.html
  6. Library: Boost
    - http://www.boost.org/doc/libs/1_53_0/doc/html/boost_random/reference.html
  7. Library: [RandomKit](http://js2007.free.fr/code/index.html#RandomKit)
  8. Library: [Tina's Random Number Generator Library](http://numbercrunch.de/trng/)
    - Includes many distributions, also support for/discussion about parallel RNGs.
  9. Misc:
    - http://tommd.github.io/posts/RNG-Bench.html

### Summary of research from other languages:
#### Structures and functions commonly appearing

##### Distributions:

Very common/important:

 - Normal
 - Exponential
 - Uniform (discrete and continuous)
 - Gamma (many distributions are special cases/functions of this, e.g. Chi^2, F, t, beta, even uniform.)

#### Variations on implementation seen
#### Pitfalls and hazards associated with each variant
#### Relationship to other libraries and/or abstract interfaces

## 4. Module writing

  - WIP: https://github.com/huonw/rust-rand
  - Pull request: _link to bug_

### Additional implementation notes

  - `Rng` should take `&mut self`, instead of forcing the use of mutable fields
  - Generating many random numbers at once: methods that fill vectors, or iterators?
  - _note_